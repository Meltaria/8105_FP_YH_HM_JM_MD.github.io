<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Project Report</title>

<script src="site_libs/header-attrs-2.16/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="data_cleaning.html">Data Cleaning</a>
</li>
<li>
  <a href="linear-regression.html">Data Analysis</a>
</li>
<li>
  <a href="http://github.com/Meltaria/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="shiny_dashboard_template.Rmd">Explore our Data</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Project Report</h1>

</div>


<p>Here is a group from class P8105: Data Science. In this website you
can find our final project research.</p>
<p>Our group members are all from Columbia University. You can find more
information about us from this <a href="about.html">link</a> or by
clicking on the About tab above.</p>
<div id="abstract" class="section level2">
<h2>Abstract</h2>
<p>Even though it can be effectively prevented by vaccine, <a
href="https://www.cdc.gov/hepatitis/hbv/index.htm">Hepatitis B</a>
currently is still a significant public health concern. Infants are at
high risk of developing a chronic infection from HBV if they get
infected with the virus, whereas only 2%-6% of adults who get infected
with the virus may get chronically infected. The best way to prevent HBV
is to get vaccinated [<a
href="https://www.cdc.gov/hepatitis/hbv/index.htm">1</a>]. As it is
obvious that Hepatitis B vaccination rates vary in different
communities, our group would like to find what factors can be
statistically significantly related to an individuals’ Hepatitis B
vaccination status. Data related to vaccination status was extracted
from <a
href="https://wwwn.cdc.gov/Nchs/Nhanes/2017-2018/P_HIQ.htm">CDC’s
National Health and Nutrition Examination Survery website</a> from 2017
to pre-COVID March 2020 and cleaned. A logistic regression model was
built to explore the relationship of hepatitis B vaccination status with
a variety of factors, including age, gender, race, education level, and
insurance coverage. The final result showed that all of these variables
were significantly associated with Hepatitis B vaccination status. The
model obtained was: <strong>model = glm(formula = hepbvax ~ agecrude +
gender + race + educat + insany, family = binomial())</strong>. Our
results suggest a need to consider the impact of these factors when
designing hepatitis B vaccination programs to ensure equitable
vaccination outreach and effective hepatitis B prevention.</p>
</div>
<div id="motivation" class="section level2">
<h2>Motivation</h2>
<p>Hepatitis B virus caused an estimated total of 21,600 cases of acute
infection in the United States in 2018 [<a
href="https://www.cdc.gov/hepatitis/hbv/hbvfaq.htm#overview">2</a>].
Thanks to the Hepatitis B vaccine, the ratio of new HBV infections in
the United States has maintained constantly around 1 reported cases per
100 thousand individuals in the population from 2011 to 2018 [<a
href="https://www.cdc.gov/hepatitis/hbv/hbvfaq.htm#overview">2</a>].
However, there are still 880 thousand to 1.89 million people living with
HBV infection, two thirds of whom are estimated to not even know that
they are infected [<a
href="https://pubmed.ncbi.nlm.nih.gov/34097776/">3</a>,<a
href="https://pubmed.ncbi.nlm.nih.gov/33655536/">4</a>].</p>
<p>The negative impact of this disease is not spread evenly. For
instance, people born outside of the United States, who account for 14%
of the US general population, account for 69% of the US population
living with chronic HBV infection. This reminds us that HBV infection
may vary greatly across different communities [<a
href="https://www.cdc.gov/hepatitis/hbv/hbvfaq.htm#overview">2</a>].</p>
<p>HBV can be transmitted via activities involving percutaneous or
mucosal contact with body fluids. Thus, sex, injection and blood contact
can be the major route. It is possible for an infant to have HBV
infection from mother by giving birth [<a
href="https://www.cdc.gov/hepatitis/hbv/hbvfaq.htm#overview">2</a>]. The
virus can remain infectious outside body for at least 7 days [<a
href="https://pubmed.ncbi.nlm.nih.gov/6111645/">5</a>].</p>
<p>After being infected, most children younger than 5 years old and
newly infected immunosuppressed adult would show asymptomatic. Around
30% to 50% of people older than 5 years old may have symptoms such as
fever, fatigue, nausea and joint pain, if it is acute infection [<a
href="https://pubmed.ncbi.nlm.nih.gov/18096267/">6</a>]. If chronic HBV
infected, people would show asymptomatic, but some may develop
hepatitis, cirrhosis, or hepatocelluar carcinoma [<a
href="https://www.cdc.gov/hepatitis/hbv/hbvfaq.htm#overview">2</a>].</p>
<p>In order to prevent HBV, Hepatitis B Vaccination is the best method
[<a href="https://www.cdc.gov/mmwr/volumes/67/rr/rr6701a1.htm">7</a>].
It is recommended that people from all age range to receive
vaccination.</p>
<p>It would be ideal that over three doses vaccination were taken but
according to the CDC’s report, only 40.3% of adults aged 19 to 49 years
and 19.1% of adults aged over 50 years received over 3 doses HepB
vaccination [<a
href="https://www.cdc.gov/mmwr/volumes/71/wr/pdfs/mm7113a1-h.pdf">8</a>].
Thus, our group would like to research on what factors may significantly
associated with the vaccination condition. By focusing on these factors
for further research, it would be possible to raise the Hepatitis B
vaccination ratio by developing new policies.</p>
</div>
<div id="related-work" class="section level2">
<h2>Related Work</h2>
<p>NNHANES researchers provide open source data for extensive data
collection. Multiple publications have contributed to scholarship on how
socioeconomic factors relate to vaccination. One of our team members has
previously worked with the larger dataset to augment his research
interests.</p>
<p>In addition to a commitment to leveraging open source data, we also
wanted to demonstrate accessibility of research for lay members of the
public. To do this, a dashboard was created for a dynamic way of
interfacing with the data. Predictors included in the original dataset
(but not necessarily in the final model) are available so one could view
variations in vaccination of Hepatitis B across different parameters:
age (10 year spans), insurance coverage status, sex, race, and
education. Important for the public to note is that the way the data was
loaded corresponds with the way that the NHANEs study initially
categorized (for example) race and ethnicity variables.</p>
</div>
<div id="data-and-exploratory-analysis" class="section level2">
<h2>Data and Exploratory Analysis</h2>
<p>Raw data has been obtained from <a href="https://www.cdc.gov/">CDC
website</a>. The data was chosen from the <a
href="https://wwwn.cdc.gov/Nchs/Nhanes/2017-2018/P_HIQ.htm">CDC’s
National Health and Nutrition Examination Survery website</a>, collected
from 2017 to March 2020 pre-pandemic period. In order for further
analysis, the data set was cleaned and merged as our output.</p>
<p>All the data files were saved in our github folder, and you can visit
them via <a
href="https://github.com/Meltaria/8105_FP_YH_HM_JM_MD.github.io.git">https://github.com/Meltaria/8105_FP_YH_HM_JM_MD.github.io.git</a>.
The file, <strong>nhanes</strong>, is the data frame containing all
these six distinct data files. You may taken a close look about the
detailed procedure of <a href="data_cleaning.html">data cleaning</a></p>
<p>These six data set includes Alcohol Use, Demographics, Hepatitis,
Health Insurance, Immunization and Income. All the duplicated data was
eliminated and only the data from those, who are 18 years and older, was
selected for our cohort. There are () individuals in it with average age
of ().</p>
<p>After plotting the individual’s age, we found that people who were
older than 80 years old were classified as 80 years old. A different
method should be used to categorizing the age for a clearer view.</p>
<p>We have got two methods. One was to categorize age into deciles, for
0 to 9, 10 to 19 and so on. Those individuals with high age would be
classified in to 80+. Another one was to categorize the age into
quartiles. People were classified into four gouprs: younger than 25
years, 25 to 49 years, 50 to 74 years and over 75 years old.</p>
<p>All the missing data were eradicated. The descriptive variables’
numeric labels were relabeled and added character descriptions. For
gender, we relabeled them as 1 to be male and 0 to be female. The race
variables were labled from 0 to 5, as Mexican American, Other Hispanic,
Non-Hispanic White, Non-Hispanic Black, Non-Hispanic Asian and Other
Race, including Multi-Racial. We also categorized the Family Monthly
Poverty Level index as a binary outcome that The ratio smaller than 5
would be categorized as 0 while those equal or larger than 5 would be
labelled as 1. The education category was also reorganized. The missing
data and refused people were lablled as NA and eradicated. 9th to 11th
grade (or no diploma) and high school grad or GED were merged into a new
category: “High school/GED”. Other groups maintained same or renamed:
lower than 9th grade, College and College Grad+.</p>
<p>The individual’s Hepatitis Histories were also cleaned. For both
Hepatitis B and Hepatitis C, only Yes and No were preserved. Refused and
Don’t known would be labelled as NA and eradicated with missing data.
Similar process was done to the Health insurance Coverage, containing
only Yes and No. The data of heptatitis B Vaccination Status were also
included as Immunization Status. Excluding refused, don’t known and
missing data, we preserved at least three doses, less than three doses
and no doses.</p>
<p>In the end, we restrict the data frame to include only interested
individuals. A table was included to show how many individuals are being
excluded and why.</p>
</div>
<div id="linear-regression-analysis" class="section level2">
<h2>Linear Regression Analysis</h2>
<p>You can find detailed linear regression procedure <a
href="linear-regression.html">here</a></p>
<p>The data set, <strong>nhanes</strong>, contains 11 variables in
total. <strong>agecrude</strong>: age in years at screening</p>
<p><strong>age_decile</strong>: categorize age in every 10 years,
including: “0-9”, “10-19”, “20-29”, “30-39”, “40-49”, “50-59”, “60-69”,
“70-79”, “80+”</p>
<p><strong>age_quartile</strong>: categorize age in every 25 years,
including: “&lt;25 years”, “25-49 years”, “50-74 years”, “≥75 years”</p>
<p><strong>gender</strong>: the individual’s sex, including “Female” and
“Male”</p>
<p><strong>race</strong>: the individual’s race, including “Mexican
American”, “Other Hispanic”, “Non-Hispanic White”, “Non-Hispanic Black”,
“Non-Hispanic Asian”, “Other/Multi-Racial”</p>
<p><strong>poverty</strong>: binary outcome of poverty index, including
“Index of 0-4.99”, “Index &gt;=5”</p>
<p><strong>educat</strong>: individual’s education level, including
“&lt;9th grade”, “High school/GED”, “College”, “College Grad+”</p>
<p><strong>insany</strong>: if insurance covered, including “No”,
“Yes”</p>
<p><strong>hepb</strong>: Hepatitis B history, including “No History of
Hepatitis B”, “History of Hepatitis B”</p>
<p><strong>hepc</strong>: Hepatitis C history, including “No History of
Hepatitis C”, “History of Hepatitis C”</p>
<p><strong>hepbvax</strong>: Hepatitis B vaccination history, including
“At Least Three Doses”, “Less Than Three Doses”, “No Doses”</p>
<p>The variables were paired and plotted. Based on the plots, we can
find that, most of the variables were normal so no transformation may be
required.</p>
<p>As there are 3 age variables and we only need one variable included
in the model, three logistic regression models were built based on
different age variables.</p>
<p>Automatic selection was used to find models with age_decile,
age_quartile and agecrude. Both backward elimination and forward
selection were processed. Comparing the selection of the models, the AIC
of agecrude’s model is slightly smaller than that of age_deciles and
age_quartiles. Thus, we choose agecrude as our age variable in the
model.</p>
<p>The models we obtained from the backward elimination and forward
selection are different. <strong>fitback = glm(formula = hepbvax ~
agecrude + gender + race + educat + insany, family = binomial(), data =
nhanes_crude)</strong> for backward elimination and <strong>fitfor =
glm(formula = hepbvax ~ agecrude + gender + race + poverty + educat +
insany + hepb + hepc, family = binomial(), data = nhanes_crude)</strong>
for forward selection. Fitfor has three more predictors included,
poverty, hepb, and hepc, than fitback. Further procedure should be done
to choose one of the models.</p>
<p>We labeled fitback as the small model “fit_small” and fitfor as the
large model “fit_large” as the fit_large simply had three more
predictors than fit_small. We set the null hypothesis H0 that: poverty,
hepb and hepc are not statistically significant to the model and the
alternative hypothesis H1 that: poverty, hepb and hepc are statistically
significant to the model. We used</p>
<p>Anova for logistic regression was used to compare these two models.
The p-value is 0.3299, larger than 0.05. Thus, we failed to reject the
null hypothesis and concluded that the larger model was not superior.
Thus the small model was chosen. Our model showed to be <strong>model =
glm(formula = hepbvax ~ agecrude + gender + race + educat + insany,
family = binomial(), data = nhanes_crude)</strong>.</p>
</div>
<div id="conclusion-and-discussion" class="section level2">
<h2>Conclusion and Discussion</h2>
<p>Our final model showed that the age, gender, race, education level
and insurance coverage are significantly associated with the vaccination
condition.</p>
<p>The “agecrude” and “genderMale” terms have the estimate coefficient
to be positive, as 0.063 and 0.535. It may indicate that older people
may be more likely take vaccination than the younger ones and male may
be more willing to take take vaccination than the female do. These two
terms’ p-value are extremely small, lower than 0.001, indicating they
are significantly associated with vaccination conditions.</p>
<p>The “race” predictor showed to be negative for all its terms’
estimate coefficient. Black has the largest coefficient to be -0.118,
indicating they are more willing to take vaccination than the other
races, comparing Hispanic’s -0.433, White’s -0.345 and Asian’s -0.496.
However, Black has the p.value 0.328, much larger than 0.05, indicating
they may play a less significant role in vaccination taking, together
with other Multi-Racial people. Asian may play the most significant role
compared with other race for their lowest p-value.</p>
<p>According to the estimated coefficient, it looks like that people
with higher education level are less likely to take vaccination. People
with higher education level plays a more significant role in vaccination
conditions according to their p-values smaller than 0.001.</p>
<p>It is also surprising that even with insurance coverage, people are
still less likely to take vaccination as the estimated coefficient is
-0.494. With p-value smaller that 0.001, it showed to us that insurance
coverage is still an important factor for taking vaccination.</p>
</div>
<div id="further-study" class="section level2">
<h2>Further Study</h2>
<p>From the model we obtained in this research, we are able to find
which variable can be significantly associated with Hepatitis B
vaccination taking. Age, gender, race, education level and insurance
covering contribute to the final result. In the future, more detailed
research can be done by focuing how and why these factors can affect the
vaccination.</p>
</div>
<div id="discussion" class="section level2">
<h2>Discussion</h2>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>120457fce524d33e6cd86422ac086eae1d69afa8</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>The original dataset contained multiple variables that ultimately
were not included in the cleaned dataset. Additionally issues with how
the data was coded was conducive to having varied missing data or
incomplete data, leading to limited ability to incorporate granularity
in the data. For example, there were multiple missing data responses for
the different insurance types including Medicare. Race and ethnicity
were also conflated in the data collection; further cleaning may have
lent itself to difficulty This may have been an important but not
considered correlate in the positive findings for age; among those
variables not included were alcohol abuse which through a behavioral
mechanism pathway may have been ultimately considered. As such, the
final dataset upon which modeling and the linear regression may not have
been refined. As the data was collected from 2017 up until the pandemic
onset (March 2020), it may have limited generalizability to present-day
factors.</p>
</div>
<div id="acknowledgements" class="section level2">
<h2>Acknowledgements</h2>
<p>Thank you to Professor Goldsmith, our group TA Paula Wu and all TAs
as well as to NHANES researchers, collaborators, and participants.</p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
